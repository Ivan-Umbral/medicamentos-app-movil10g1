<div class="ion-page">
    <ion-header>
        <ion-toolbar color="primary">
            <ion-title>Pago</ion-title>
            <ion-buttons slot="end">
                <ion-button (click)="closeModal()">
                    Cancelar
                </ion-button>
            </ion-buttons>
        </ion-toolbar>
    </ion-header>
    <ion-content>
        <ion-grid fixed *ngIf="preOrderObject">
            <form novalidate autocomplete="off" [formGroup]="form" (ngSubmit)="pay()">
                <ion-row>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item lines="none">
                            <ion-label> Medicamento: <strong>{{ preOrderObject.medicamentoName }}</strong> </ion-label>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item lines="none">
                            <ion-label> Cantidad: <strong>{{ preOrderObject.cantidad }}</strong> </ion-label>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item lines="none">
                            <ion-label> Total: <strong>{{ preOrderObject.total | currency }}</strong> </ion-label>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item>
                            <ion-label position="floating">Número de tarjeta</ion-label>
                            <ion-input appBlockCopyPaste type="text" maxlength="16" inputmode="numeric" formControlName="creditCardNumber"></ion-input>
                        </ion-item>
                        <ion-item lines="none" *ngIf="isCreditCardValid">
                            <ion-text class="form-error" color="danger"> {{ getErrorMessage('creditCardNumber') }} </ion-text>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item>
                            <ion-label position="floating">Mes de expiración</ion-label>
                            <ion-input appBlockCopyPaste type="text" maxlength="2" inputmode="numeric" formControlName="expMonth"></ion-input>
                        </ion-item>
                        <ion-item lines="none" *ngIf="isExpMonthValid">
                            <ion-text class="form-error" color="danger"> {{ getErrorMessage('expMonth') }} </ion-text>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item>
                            <ion-label position="floating">Año de expiración</ion-label>
                            <ion-input appBlockCopyPaste type="text" maxlength="4" inputmode="numeric" formControlName="expYear"></ion-input>
                        </ion-item>
                        <ion-item lines="none" *ngIf="isExpYearValid">
                            <ion-text class="form-error" color="danger"> {{ getErrorMessage('expYear') }} </ion-text>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-item>
                            <ion-label position="floating">CVC</ion-label>
                            <ion-input appBlockCopyPaste type="password" maxlength="3" inputmode="numeric" formControlName="cvc"></ion-input>
                        </ion-item>
                        <ion-item lines="none" *ngIf="isCvcValid">
                            <ion-text class="form-error" color="danger"> {{ getErrorMessage('cvc') }} </ion-text>
                        </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="12" size-md="6" size-sm="6" size-xs="12">
                        <ion-button (click)="pay()" expand="block" color="primary" [disabled]="!form.valid">
                            Pagar
                        </ion-button>
                    </ion-col>
                    {{ form.controls['expYear'].errors | json }}
                </ion-row>
            </form>
        </ion-grid>
    </ion-content>
</div>